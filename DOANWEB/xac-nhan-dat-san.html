<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ƒê·∫∑t s√¢n th√†nh c√¥ng - SportBooking</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <style>
      .confirmation-container {
        max-width: 600px;
        margin: 4rem auto;
        text-align: center;
        padding: 0 1rem;
      }
      .confirmation-icon {
        font-size: 4rem;
        color: #10b981;
        margin-bottom: 1.5rem;
      }
      .confirmation-actions {
        margin-top: 2.5rem;
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
      }
      .confirmation-card {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        margin-top: 2rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        text-align: left;
      }
      .detail-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.75rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid #e5e7eb;
      }
      .detail-row:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }
      .detail-label {
        color: #6b7280;
      }
      .detail-value {
        font-weight: 500;
      }
      .booking-id {
        background: #f3f4f6;
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        display: inline-block;
        margin-bottom: 1.5rem;
        font-family: monospace;
        font-size: 0.875rem;
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="index.html" class="logo">SportBooking</a>
        <nav class="nav">
          <a href="index.html">Trang ch·ªß</a>
          <a href="gioithieu.html">Gi·ªõi thi·ªáu</a>
          <a href="danh-sach-san.html" class="active">Danh s√°ch s√¢n</a>
          <a href="lienhe.html">Li√™n h·ªá</a>
          <a href="#" class="btn btn-primary btn-sm" id="userMenu">T√†i kho·∫£n</a>
        </nav>
      </div>
    </header>

    <main class="section">
      <div class="confirmation-container">
        <div class="confirmation-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <h1>ƒê·∫∑t s√¢n th√†nh c√¥ng!</h1>
        <p class="lead">C·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng d·ªãch v·ª• c·ªßa ch√∫ng t√¥i</p>
        
        <div class="booking-id" id="bookingId">#BK123456</div>
        
        <div class="confirmation-card">
          <h3>Th√¥ng tin ƒë·∫∑t s√¢n</h3>
          <div class="booking-details">
            <div class="detail-row">
              <span class="detail-label">S√¢n:</span>
              <span class="detail-value" id="bookingCourt">S√¢n 1</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Ng√†y:</span>
              <span class="detail-value" id="bookingDate">Th·ª© 2, 20/10/2023</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Khung gi·ªù:</span>
              <span class="detail-value" id="bookingTime">18:00 - 20:00</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Ph∆∞∆°ng th·ª©c thanh to√°n:</span>
              <span class="detail-value" id="paymentMethod">V√≠ ƒëi·ªán t·ª≠ Momo</span>
            </div>
            <div class="detail-row" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e5e7eb;">
              <span class="detail-label" style="font-weight: 600;">T·ªïng c·ªông:</span>
              <span class="detail-value" style="font-weight: 700; color: #10b981;" id="bookingAmount">200,000 VNƒê</span>
            </div>
          </div>
        </div>
        
        <div class="confirmation-actions">
          <a href="index.html" class="btn btn-secondary">üè† V·ªÅ trang ch·ªß</a>
          <a href="lich-dat-san-cua-toi.html" class="btn btn-primary">üìã Xem ƒë∆°n ƒë·∫∑t s√¢n</a>
        </div>
        
        <div class="mt-8 text-sm text-gray-500">
          <p>M·ªôt email x√°c nh·∫≠n ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn ƒë·ªãa ch·ªâ email c·ªßa b·∫°n.</p>
          <p>N·∫øu c√≥ b·∫•t k·ª≥ th·∫Øc m·∫Øc n√†o, vui l√≤ng li√™n h·ªá b·ªô ph·∫≠n h·ªó tr·ª£ c·ªßa ch√∫ng t√¥i.</p>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p>¬© 2023 SportBooking. T·∫•t c·∫£ c√°c quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
      </div>
    </footer>

    <script src="auth.js"></script>
    <script>
      // L·∫•y th√¥ng tin ƒë∆°n ƒë·∫∑t s√¢n t·ª´ URL
      const urlParams = new URLSearchParams(window.location.search);
      const bookingId = urlParams.get('bookingId');
      
      // N·∫øu kh√¥ng c√≥ bookingId, chuy·ªÉn v·ªÅ trang ch·ªß
      if (!bookingId) {
        window.location.href = 'index.html';
      }
      
      // L·∫•y th√¥ng tin ƒë∆°n ƒë·∫∑t s√¢n t·ª´ localStorage
      function loadBookingDetails() {
        const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
        const booking = bookings.find(b => b.id === bookingId);
        
        if (!booking) {
          window.location.href = 'index.html';
          return;
        }
        
        // Hi·ªÉn th·ªã th√¥ng tin ƒë∆°n ƒë·∫∑t s√¢n
        document.getElementById('bookingId').textContent = `#${booking.id}`;
        document.getElementById('bookingCourt').textContent = `S√¢n ${booking.court}`;
        
        // ƒê·ªãnh d·∫°ng ng√†y th√°ng
        const date = new Date(booking.date);
        const options = { weekday: 'long', year: 'numeric', month: 'numeric', day: 'numeric' };
        document.getElementById('bookingDate').textContent = date.toLocaleDateString('vi-VN', options);
        
        document.getElementById('bookingTime').textContent = booking.time;
        document.getElementById('bookingAmount').textContent = booking.amount.toLocaleString('vi-VN') + ' VNƒê';
        
        // Hi·ªÉn th·ªã ph∆∞∆°ng th·ª©c thanh to√°n
        let paymentMethod = '';
        switch(booking.paymentMethod) {
          case 'momo':
            paymentMethod = 'V√≠ ƒëi·ªán t·ª≠ Momo';
            break;
          case 'bank':
            paymentMethod = 'Chuy·ªÉn kho·∫£n ng√¢n h√†ng';
            break;
          case 'cash':
            paymentMethod = 'Thanh to√°n tr·ª±c ti·∫øp';
            break;
          default:
            paymentMethod = booking.paymentMethod;
        }
        document.getElementById('paymentMethod').textContent = paymentMethod;
      }
      
      // C·∫≠p nh·∫≠t giao di·ªán ng∆∞·ªùi d√πng khi ƒë√£ ƒëƒÉng nh·∫≠p
      function updateUIForLoggedInUser() {
        const currentUser = getCurrentUser();
        const userMenu = document.getElementById('userMenu');
        
        if (currentUser) {
          userMenu.textContent = currentUser.name;
          userMenu.href = 'profile.html';
          
          // Th√™m menu dropdown
          userMenu.insertAdjacentHTML('afterend', `
            <div class="user-dropdown">
              <a href="profile.html">T√†i kho·∫£n c·ªßa t√¥i</a>
              <a href="lich-dat-san-cua-toi.html">ƒê∆°n ƒë·∫∑t s√¢n</a>
              <a href="#" onclick="logout()">ƒêƒÉng xu·∫•t</a>
            </div>
          `);
        } else {
          userMenu.textContent = 'ƒêƒÉng nh·∫≠p';
          userMenu.href = 'login.html';
        }
      }
      
      // Kh·ªüi t·∫°o trang
      document.addEventListener('DOMContentLoaded', function() {
        // Ki·ªÉm tra ƒëƒÉng nh·∫≠p
        checkLoginStatus();
        
        // C·∫≠p nh·∫≠t giao di·ªán ng∆∞·ªùi d√πng
        updateUIForLoggedInUser();
        
        // T·∫£i th√¥ng tin ƒë∆°n ƒë·∫∑t s√¢n
        loadBookingDetails();
      });
    </script>
  </body>
</html>
