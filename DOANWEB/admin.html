<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - SportBooking</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body class="admin-body">
    <!-- Sidebar -->
    <aside class="admin-sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>üèüÔ∏è SportBooking</h2>
            <p class="admin-badge">ADMIN PANEL</p>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active" onclick="showSection('dashboard')">
                <span class="nav-icon">üìä</span>
                <span class="nav-text">T·ªïng quan</span>
            </a>
            
            <div class="nav-group">
                <div class="nav-group-title">Qu·∫£n l√Ω</div>
                
                <a href="#employees" class="nav-item" onclick="showSection('employees')">
                    <span class="nav-icon">üë•</span>
                    <span class="nav-text">Nh√¢n vi√™n</span>
                </a>
                <a href="/DOANWEB/admin-phan-cong.html" class="nav-item">
                    <span class="nav-icon">üïí</span>
                    <span class="nav-text">Ph√¢n c√¥ng ca</span>
                </a>
                
                <a href="#courts" class="nav-item" onclick="showSection('courts')">
                    <span class="nav-icon">üèüÔ∏è</span>
                    <span class="nav-text">S√¢n th·ªÉ thao</span>
                </a>
                
                <a href="#court-types" class="nav-item" onclick="showSection('court-types')">
                    <span class="nav-icon">‚öΩ</span>
                    <span class="nav-text">Lo·∫°i s√¢n & Gi√°</span>
                </a>
            </div>
            
            <div class="nav-group">
                <div class="nav-group-title">ƒê∆°n ƒë·∫∑t & Kh√°ch h√†ng</div>
                
                <a href="#bookings" class="nav-item" onclick="showSection('bookings')">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text">ƒê∆°n ƒë·∫∑t s√¢n</span>
                </a>
                
                <a href="#users" class="nav-item" onclick="showSection('users')">
                    <span class="nav-icon">üë§</span>
                    <span class="nav-text">Ng∆∞·ªùi d√πng</span>
                </a>
            </div>
            
            <div class="nav-group">
                <div class="nav-group-title">B√°o c√°o & Th·ªëng k√™</div>
                
                <a href="#revenue" class="nav-item" onclick="showSection('revenue')">
                    <span class="nav-icon">üí∞</span>
                    <span class="nav-text">Doanh thu</span>
                </a>
                
                <a href="#reports" class="nav-item" onclick="showSection('reports')">
                    <span class="nav-icon">üìà</span>
                    <span class="nav-text">B√°o c√°o</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
        <!-- Top Bar -->
        <header class="admin-topbar">
            <button class="btn-toggle-sidebar" onclick="toggleSidebar()">
                <span>‚ò∞</span>
            </button>
            
            <div class="topbar-right">
                <div class="admin-user-info">
                    <span class="admin-user-name" id="adminName">Admin</span>
                    <div class="admin-user-avatar">üë§</div>
                </div>
                <button class="btn-logout" onclick="logout()">
                    <span>üö™</span> ƒêƒÉng xu·∫•t
                </button>
            </div>
        </header>

        <!-- Dashboard Section -->
        <section id="section-dashboard" class="admin-section active">
            <div class="section-header">
                <h1>üìä T·ªïng quan h·ªá th·ªëng</h1>
                <p>Th·ªëng k√™ t·ªïng quan v·ªÅ ho·∫°t ƒë·ªông ƒë·∫∑t s√¢n</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        üí∞
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Doanh thu h√¥m nay</div>
                        <div class="stat-value" id="todayRevenue">0ƒë</div>
                        <div class="stat-change positive">+12.5%</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        üìã
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">ƒê∆°n ƒë·∫∑t h√¥m nay</div>
                        <div class="stat-value" id="todayBookings">0</div>
                        <div class="stat-change positive">+8 ƒë∆°n</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        üèüÔ∏è
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">S√¢n ƒëang ho·∫°t ƒë·ªông</div>
                        <div class="stat-value" id="activeCourts">0</div>
                        <div class="stat-change">T·ªïng s·ªë s√¢n</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        üë•
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Ng∆∞·ªùi d√πng</div>
                        <div class="stat-value" id="totalUsers">0</div>
                        <div class="stat-change">T·ªïng t√†i kho·∫£n</div>
                    </div>
                </div>
            </div>

            <!-- Recent Bookings -->
            <div class="admin-card">
                <div class="card-header">
                    <h3>üìã ƒê∆°n ƒë·∫∑t s√¢n g·∫ßn ƒë√¢y</h3>
                    <a href="#bookings" onclick="showSection('bookings')" class="btn-view-all">Xem t·∫•t c·∫£ ‚Üí</a>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>M√£ ƒë∆°n</th>
                                <th>Kh√°ch h√†ng</th>
                                <th>S√¢n</th>
                                <th>Ng√†y</th>
                                <th>Gi·ªù</th>
                                <th>Gi√°</th>
                                <th>Tr·∫°ng th√°i</th>
                            </tr>
                        </thead>
                        <tbody id="recentBookingsTable">
                            <tr>
                                <td colspan="7" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Employees Section -->
        <section id="section-employees" class="admin-section">
            <div class="section-header">
                <h1>üë• Qu·∫£n l√Ω nh√¢n vi√™n</h1>
                <button class="btn btn-primary" onclick="openEmployeeModal()">
                    <span>‚ûï</span> Th√™m nh√¢n vi√™n
                </button>
            </div>

            <div class="admin-card">
                <div class="card-header">
                    <div class="search-box">
                        <input type="text" placeholder="üîç T√¨m ki·∫øm theo t√™n nh√¢n vi√™n..." id="searchEmployee" oninput="searchEmployees()">
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>M√£ NV</th>
                                <th>H·ªç t√™n</th>
                                <th>S·ªë ƒëi·ªán tho·∫°i</th>
                                <th>Ch·ª©c v·ª•</th>
                                <th>Ch·∫•m c√¥ng h√¥m nay</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="employeesTable">
                            <tr>
                                <td colspan="7" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="7" style="text-align: right; padding: 15px;">
                                    <button class="btn btn-success" onclick="showSalaryReport()">
                                        <span>üí∞</span> T·ªïng l∆∞∆°ng th√°ng
                                    </button>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </section>

        <!-- Courts Section -->
        <section id="section-courts" class="admin-section">
            <div class="section-header">
                <h1>üèüÔ∏è Qu·∫£n l√Ω s√¢n th·ªÉ thao</h1>
                <button class="btn btn-primary" onclick="openCourtModal()">
                    <span>‚ûï</span> Th√™m s√¢n
                </button>
            </div>

            <div class="admin-card">
                <div class="card-header">
                    <div class="search-box">
                        <input type="text" placeholder="üîç T√¨m ki·∫øm theo t√™n s√¢n..." id="searchCourt" oninput="searchCourts()">
                    </div>
                    <select class="filter-select" id="filterCourtType" onchange="filterCourtsByType()">
                        <option value="">T·∫•t c·∫£ lo·∫°i s√¢n</option>
                    </select>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>M√£ s√¢n</th>
                                <th>T√™n s√¢n</th>
                                <th>Lo·∫°i s√¢n</th>
                                <th>M√¥ t·∫£</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="courtsTable">
                            <tr>
                                <td colspan="7" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Court Types Section -->
        <section id="section-court-types" class="admin-section">
            <div class="section-header">
                <h1>‚öΩ Qu·∫£n l√Ω lo·∫°i s√¢n & Gi√° thu√™</h1>
                <button class="btn btn-primary" onclick="openCourtTypeModal()">
                    <span>‚ûï</span> Th√™m lo·∫°i s√¢n
                </button>
            </div>

            <div class="admin-card">
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>M√£ lo·∫°i</th>
                                <th>T√™n lo·∫°i s√¢n</th>
                                <th>Gi√° thu√™/gi·ªù</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="courtTypesTable">
                            <tr>
                                <td colspan="5" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Bookings Section -->
        <section id="section-bookings" class="admin-section">
            <div class="section-header">
                <h1>üìã Qu·∫£n l√Ω ƒë∆°n ƒë·∫∑t s√¢n</h1>
            </div>

            <div class="admin-card">
                <div class="card-header">
                    <div class="search-box">
                        <input type="text" placeholder="üîç T√¨m ki·∫øm theo m√£ ƒë∆°n, t√™n kh√°ch h√†ng..." id="searchBooking" oninput="searchBookings()">
                    </div>
                    <div class="filter-group">
                        <select class="filter-select" id="filterBookingStatus" onchange="filterBookings()">
                            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="cho_duyet">Ch·ªù duy·ªát</option>
                            <option value="da_duyet">ƒê√£ duy·ªát</option>
                            <option value="huy">ƒê√£ h·ªßy</option>
                        </select>
                        <input type="date" class="filter-date" id="filterBookingDate" onchange="filterBookings()">
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>M√£ ƒë∆°n</th>
                                <th>Kh√°ch h√†ng</th>
                                <th>S√¢n</th>
                                <th>Ng√†y ƒë·∫∑t</th>
                                <th>Khung gi·ªù</th>
                                <th>Gi√°</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="bookingsTable">
                            <tr>
                                <td colspan="9" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Users Section -->
        <section id="section-users" class="admin-section">
            <div class="section-header">
                <h1>üë§ Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h1>
            </div>

            <div class="admin-card">
                <div class="card-header">
                    <div class="search-box">
                        <input type="text" placeholder="üîç T√¨m ki·∫øm ng∆∞·ªùi d√πng..." id="searchUser">
                    </div>
                    <select class="filter-select" id="filterUserStatus">
                        <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                        <option value="active">ƒêang ho·∫°t ƒë·ªông</option>
                        <option value="locked">ƒê√£ kh√≥a</option>
                    </select>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>M√£ TK</th>
                                <th>T√™n ƒëƒÉng nh·∫≠p</th>
                                <th>H·ªç t√™n</th>
                                <th>Email</th>
                                <th>S·ªë ƒëi·ªán tho·∫°i</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <tr>
                                <td colspan="8" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Revenue Section -->
        <section id="section-revenue" class="admin-section">
            <div class="section-header">
                <h1>üí∞ Th·ªëng k√™ doanh thu</h1>
            </div>

            <div class="revenue-filters">
                <button class="filter-btn active" onclick="filterRevenue('day')">Theo ng√†y</button>
                <button class="filter-btn" onclick="filterRevenue('month')">Theo th√°ng</button>
                <button class="filter-btn" onclick="filterRevenue('year')">Theo nƒÉm</button>
                <button class="filter-btn" onclick="filterRevenue('court')">Theo s√¢n</button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-label">T·ªïng doanh thu th√°ng n√†y</div>
                        <div class="stat-value" id="monthRevenue">0ƒë</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-label">T·ªïng ƒë∆°n ƒë·∫∑t th√°ng n√†y</div>
                        <div class="stat-value" id="monthBookings">0</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-content">
                        <div class="stat-label">Trung b√¨nh/ƒë∆°n</div>
                        <div class="stat-value" id="avgRevenue">0ƒë</div>
                    </div>
                </div>
            </div>

            <div class="admin-card">
                <div class="card-header">
                    <h3>üìà Bi·ªÉu ƒë·ªì doanh thu</h3>
                </div>
                <div class="chart-container">
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>

            <div class="admin-card">
                <div class="card-header">
                    <h3>üí∞ Chi ti·∫øt doanh thu</h3>
                </div>
                <div class="table-responsive">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Ng√†y</th>
                                <th>S·ªë ƒë∆°n</th>
                                <th>Doanh thu</th>
                                <th>Trung b√¨nh</th>
                            </tr>
                        </thead>
                        <tbody id="revenueTable">
                            <tr>
                                <td colspan="4" class="text-center">ƒêang t·∫£i d·ªØ li·ªáu...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Reports Section -->
        <section id="section-reports" class="admin-section">
            <div class="section-header">
                <h1>üìà Xu·∫•t b√°o c√°o</h1>
            </div>

            <div class="reports-grid">
                <div class="report-card">
                    <div class="report-icon">üìä</div>
                    <h3>B√°o c√°o doanh thu</h3>
                    <p>Xu·∫•t b√°o c√°o doanh thu theo kho·∫£ng th·ªùi gian</p>
                    <div class="report-actions">
                        <input type="date" id="reportStartDate">
                        <input type="date" id="reportEndDate">
                        <button class="btn btn-primary" onclick="exportRevenueReport()">
                            üì• Xu·∫•t Excel
                        </button>
                    </div>
                </div>

                <div class="report-card">
                    <div class="report-icon">üìã</div>
                    <h3>B√°o c√°o ƒë∆°n ƒë·∫∑t s√¢n</h3>
                    <p>Xu·∫•t danh s√°ch ƒë∆°n ƒë·∫∑t s√¢n theo th·ªùi gian</p>
                    <div class="report-actions">
                        <input type="date" id="bookingReportStartDate">
                        <input type="date" id="bookingReportEndDate">
                        <button class="btn btn-primary" onclick="exportBookingReport()">
                            üì• Xu·∫•t Excel
                        </button>
                    </div>
                </div>

                <div class="report-card">
                    <div class="report-icon">üèüÔ∏è</div>
                    <h3>B√°o c√°o s·ª≠ d·ª•ng s√¢n</h3>
                    <p>Th·ªëng k√™ t·ª∑ l·ªá s·ª≠ d·ª•ng t·ª´ng s√¢n</p>
                    <div class="report-actions">
                        <select id="courtReportMonth">
                            <option value="">Ch·ªçn th√°ng</option>
                        </select>
                        <button class="btn btn-primary" onclick="exportCourtReport()">
                            üì• Xu·∫•t PDF
                        </button>
                    </div>
                </div>

                <div class="report-card">
                    <div class="report-icon">üë•</div>
                    <h3>B√°o c√°o kh√°ch h√†ng</h3>
                    <p>Danh s√°ch kh√°ch h√†ng v√† l·ªãch s·ª≠ ƒë·∫∑t s√¢n</p>
                    <div class="report-actions">
                        <button class="btn btn-primary" onclick="exportCustomerReport()">
                            üì• Xu·∫•t Excel
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal Templates will be added via JavaScript -->
    <div id="modalContainer"></div>

    <script src="auth.js"></script>
    <script src="admin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
